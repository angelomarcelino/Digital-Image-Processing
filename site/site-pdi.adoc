:source-highlighter: pygments
:toc: left
:stem:
:listing-caption: Listing
:icons: font

= Processamento Digital de Imagens

Angelo Marcelino Cordeiro

amc.marcelino.cordeiro@gmail.com

Página desenvolvida como decumentação para os projetos desenvolvidos durante a disciplina DCA0445 - PROCESSAMENTO DIGITAL DE IMAGENS.

Link para o tutorial de opencv: https://agostinhobritojr.github.io/tutorial/pdi/[Introdução ao processamento digital de imagens com OpenCV^].

== 1. Primeira unidade

Neste tópico estão descritos as atividades realizadas referentes a primeira unidade da disciplina DCA0445.
Para a compilação dos códigos referentes à esta unidade, é necessário possuir, no mesmo diretório do arquivo `_.cpp_` o arquivo link:../atividades/Makefile[Makefile^], e executar os seguintes comandos no seu console:

._Makefile_
[source, shell]
----
$ make <nome_arquivo>
$ ./<nome_arquivo> <caminho_para_imagem>
----

=== 1.1. Regiões

Este código tem a função de um programa que recebe do usuário dois pontos P1 e P2 e verifica se os pontos fornecidos estão dentro da imagem. Em seguida delimita-se a região definida pelo retângulo de vértices opostos definidos pelos pontos P1 e P2 na qual é exibido o negativo da imagem efeito esse alcançado subtraindo 255 do valor de cada pixel que compõe o retângulo. 

O código fonte link:../atividades/regions.cpp[regions.cpp^] está está descrito abaixo:

[source, c++]
._regions.cpp_
----
include::../atividades/regions.cpp[]
----

A seguir estão as imagens de entrada do código acima:

.Entrada do programa
[#entrada-regions]
image::../atividades/imgs/person-smartphone-office-table.jpeg[Entrada do programa,300,200,role="left"] 
.Conversão para grayscale
[#grayscale-regions]
image::../atividades/imgs/grayscale.png[Converção tom de cinza,300,200,role="center"]

.

.Negativo com RGB
[#negativo-rgb-regions]
image::../atividades/imgs/negativo_color.png[Negativo com RGB,300,200,role="left"]
.Negativo do grayscale
[#negativo-grayscale-regions]
image::../atividades/imgs/negativo_grayscale.png[Negativo de grayscale,300,200]

.

=== 1.2. Trocar regiões

A atividade propõe a construção de um programa que recebe uma imagem, determina e troca os quadrantes diagonalmente numa imagem de saída. Para resolver este problema foi seguido o seguinte algoritmo:

* Obtêm-se os quadrantes da imagem defindo o tamanho da _grid_ como metade da 
altura e largura da imagem, e utilizando o construtor da classe `_Rect_`, seleciona um retângulo da matriz igual ao quadrante selecionado.
* Com o construtor da classe `_Mat_`, copia-se cada quadrante para uma matriz separada. 
* Por fim, concatenam-se os quadrantes utilizando as funções `_vconcat()_` e `_hconcat()_` na imagem, como descreve o código link:../atividades/imgs/trocaregioes.cpp[trocaregioes.cpp^] abaixo:

[source, c++]
._trocaregioes.cpp_
----
include::../atividades/trocaregioes.cpp[]
----

A seguir estão exemplos de imagens de entrada e saída do código acima:

.Entrada do programa
[#entrada-trocaregioes]
image::../atividades/imgs/windows_live_square.jpg[Entrada do programa,role="left"] 

.Saída com regiões trocadas
[#saida-trocaregioes]
image::../atividades/imgs/regioestrocadas.png[Saída do programa]

.

=== 1.3. Preenchendo regiões

Este algoritmo tem a função de contar as bolhas que possuem buracos e as que não possuem buracos, eliminando as que tocam as bordas.

Primeiramente, a exclusão dos objetos que tocam as bordas foi realizada percorrendo-se as primeiras e últimas linhas e colunas da imagem a procura de objetos e, em seguida, preecehendo-os com o valor _default_ de fundo.

Assim, pega-se o ponto (0.0) da imagem e aplica o algoritmo _floodfill_ neste ponto com a cor de _background_ que será utilizado para preencher todo o fundo da imagem. Como é suposto que os objetos são aréas com cor em _grayscale_ de 255 e os buracos são da mesma cor do fundo antigo, 0, resta então contabilizar